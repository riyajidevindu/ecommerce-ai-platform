apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namespace: ecommerce

resources:
  - ../../base

patchesStrategicMerge:
  - replicas-patch.yaml
  - strategy-patch.yaml

images:
  - name: <ECR_REGISTRY>/auth-service
    newName: 398128644108.dkr.ecr.ap-south-1.amazonaws.com/auth-service
    newTag: latest
  - name: <ECR_REGISTRY>/stock-service
    newName: 398128644108.dkr.ecr.ap-south-1.amazonaws.com/stock-service
    newTag: latest
  - name: <ECR_REGISTRY>/whatsapp-connector-service
    newName: 398128644108.dkr.ecr.ap-south-1.amazonaws.com/whatsapp-connector-service
    newTag: latest
  - name: <ECR_REGISTRY>/ai-orchestrator-service
    newName: 398128644108.dkr.ecr.ap-south-1.amazonaws.com/ai-orchestrator-service
    newTag: latest
  - name: <ECR_REGISTRY>/notification-service
    newName: 398128644108.dkr.ecr.ap-south-1.amazonaws.com/notification-service
    newTag: latest
  - name: <ECR_REGISTRY>/file-storage-service
    newName: 398128644108.dkr.ecr.ap-south-1.amazonaws.com/file-storage-service
    newTag: latest

secretGenerator:
  - name: platform-secrets
    envs:
      - secrets.env
    options:
      disableNameSuffixHash: true
